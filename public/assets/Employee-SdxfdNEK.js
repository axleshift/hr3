import{r as t,m as d,j as e,C as D}from"./index-riTVoRJU.js";import{a as m,F as v,s as T}from"./index-BHAZwjaz.js";import{C as _,a as A}from"./CCardBody-CB7xIjcr.js";import{C as F}from"./CCardHeader-B_f031Wn.js";import{C as M,a as N,b as y,c as o,d as P,e as n}from"./CTable-x6Ogsn7y.js";import{C as B,a as H,b as I,c as q}from"./CModalTitle-CPs2RdKa.js";import{C as h}from"./CFormControlWrapper-btGoWyOF.js";import{C as p}from"./CFormInput-DjbzQg3N.js";import{C as J}from"./CModalFooter-C90fi_QP.js";import"./DefaultLayout-DhnKoIg_.js";const Q=()=>{const[u,i]=t.useState([]),[f,j]=t.useState(!0),[b,l]=t.useState(!1),[x,g]=t.useState({job_position:"",department:"",salary:"",employee_id:""});t.useEffect(()=>{C()},[]);const C=async()=>{j(!0);try{const a=await d.get("/employees");if(Array.isArray(a.data)){const s=await Promise.all(a.data.map(async r=>{const w=await S(r.department,r.job_position);return{...r,salary:w}}));i(s)}else i([])}catch(a){console.error("Error fetching employees:",a),i([])}finally{j(!1)}},S=async(a,s)=>{try{const r=await d.get("/salaries",{params:{department:a,job_position:s}});return r.data?r.data:null}catch(r){return console.error("Error fetching salary:",r),null}},c=a=>{g({...x,[a.target.name]:a.target.value})},E=async a=>{a.preventDefault();try{await d.post("/salaries",x),l(!1),C()}catch(s){console.error("Error submitting salary:",s)}};return e.jsxs(_,{children:[e.jsxs(F,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Employee"}),e.jsx("div",{className:"float-end",children:e.jsx(m,{color:"primary",onClick:()=>l(!0),children:e.jsx(v,{icon:T})})})]}),e.jsx(A,{children:f?e.jsxs("div",{className:"text-center",children:[e.jsx(D,{color:"primary"}),e.jsx("p",{children:"Loading..."})]}):e.jsxs(M,{hover:!0,responsive:!0,children:[e.jsx(N,{children:e.jsxs(y,{children:[e.jsx(o,{children:"Employee ID"}),e.jsx(o,{className:"center-text",children:"Name"}),e.jsx(o,{children:"Job Position"}),e.jsx(o,{children:"Department"}),e.jsx(o,{children:"Salary"})]})}),e.jsx(P,{children:u.map(a=>e.jsxs(y,{children:[e.jsx(n,{children:a.employee_id}),e.jsx(n,{children:a.name}),e.jsx(n,{children:a.job_position}),e.jsx(n,{children:a.department}),e.jsx(n,{children:a.salary?`${a.salary.salary}`:"N/A"})]},a.id))})]})}),e.jsxs(B,{visible:b,onClose:()=>l(!1),children:[e.jsx(H,{children:e.jsx(I,{children:"Add Salary"})}),e.jsx(q,{children:e.jsxs("form",{onSubmit:E,children:[e.jsx(h,{children:"Job Position"}),e.jsx(p,{name:"job_position",placeholder:"Job Position",onChange:c,required:!0}),e.jsx(h,{children:"Department"}),e.jsx(p,{name:"department",placeholder:"Department",onChange:c,required:!0}),e.jsx(h,{children:"Salary"}),e.jsx(p,{type:"number",name:"salary",placeholder:"Salary",onChange:c,required:!0}),e.jsx(m,{type:"submit",color:"primary",children:"Add Salary"})]})}),e.jsx(J,{children:e.jsx(m,{color:"secondary",onClick:()=>l(!1),children:"Cancel"})})]})]})};export{Q as default};
