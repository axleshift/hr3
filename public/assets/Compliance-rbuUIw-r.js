import{r as o,m as i,j as e}from"./index-BqLRPtOi.js";import{a as n,F as h,s as M,t as T,v as w}from"./index-BvyDmPkc.js";import{C as D,a as k}from"./CCardBody-xSV0z4Hy.js";import{C as B}from"./CCardHeader-WD9awESC.js";import{C as A,a as H,b as j,c as l,d as I,e as c}from"./CTable-DGGVgQ6e.js";import{C as N,a as q,b as R,c as V}from"./CModalTitle-BijoO1x-.js";import{C as $}from"./CForm-Ck1Oy9s_.js";import{C as f}from"./CFormInput-CMvcMGT2.js";import{C as L}from"./CFormSelect-DsSffqHJ.js";import{C as P}from"./CModalFooter-DbuVzK22.js";import"./DefaultLayout-DpYdPsnw.js";import"./CFormControlWrapper-BATfiNbG.js";const ee=()=>{const[b,v]=o.useState([]),[y,r]=o.useState(!1),[d,u]=o.useState(!1),[a,m]=o.useState({id:null,name:"",description:"",status:"active"});o.useEffect(()=>{p()},[]);const p=async()=>{try{const s=await i.get("/compliances");v(s.data)}catch(s){console.error("Error fetching compliances:",s)}},C=s=>{const{name:t,value:F}=s.target;m({...a,[t]:F})},x=async s=>{s.preventDefault();try{d?await i.put(`/compliances/${a.id}`,a):await i.post("api/compliances",a),p(),r(!1),S()}catch(t){console.error("Error saving compliance:",t)}},g=s=>{m({id:s.id,name:s.name,description:s.description,status:s.status}),u(!0),r(!0)},E=async s=>{try{await i.delete(`/compliances/${s}`),p()}catch(t){console.error("Error deleting compliance:",t)}},S=()=>{m({id:null,name:"",description:"",status:"active"}),u(!1)};return e.jsxs(D,{children:[e.jsxs(B,{children:[e.jsx("strong",{children:"Compliance List"}),e.jsx(n,{color:"primary",className:"float-right",onClick:()=>r(!0),children:e.jsx(h,{icon:M})})]}),e.jsx(k,{children:e.jsxs(A,{children:[e.jsx(H,{children:e.jsxs(j,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(I,{children:b.map(s=>e.jsxs(j,{children:[e.jsx(c,{children:s.name}),e.jsx(c,{children:s.description}),e.jsx(c,{children:s.status}),e.jsxs(c,{children:[e.jsx(n,{color:"primary",onClick:()=>g(s),children:e.jsx(h,{icon:T})}),e.jsx(n,{color:"danger",onClick:()=>E(s.id),children:e.jsx(h,{icon:w})})]})]},s.id))})]})}),e.jsxs(N,{show:y,onClose:()=>r(!1),children:[e.jsx(q,{closeButton:!0,children:e.jsx(R,{children:d?"Edit Compliance":"Add Compliance"})}),e.jsx(V,{children:e.jsxs($,{onSubmit:x,children:[e.jsx(f,{type:"text",name:"name",label:"Name",value:a.name,onChange:C,required:!0}),e.jsx(f,{type:"text",name:"description",label:"Description",value:a.description,onChange:C}),e.jsx(L,{name:"status",label:"Status",value:a.status,onChange:C,options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],required:!0})]})}),e.jsxs(P,{children:[e.jsx(n,{color:"secondary",onClick:()=>r(!1),children:"Close"}),e.jsx(n,{color:"primary",onClick:x,children:d?"Update":"Save"})]})]})]})};export{ee as default};
