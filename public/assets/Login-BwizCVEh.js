import{r,i as C,j as e,L as f}from"./index-BregGavu.js";import{b as y,F as c,q as N,c as v,a as w}from"./index-2GwXPYeC.js";import{a as L}from"./axios-DXsv3KKR.js";import{C as b,a as m}from"./CRow-DCQtSTwn.js";import{C as S,a as I}from"./CCardBody--BWERNhg.js";import{C as E}from"./CForm-CaJJHpdi.js";import{C as F}from"./CAlert-BFvSB2mm.js";import{C as d}from"./CInputGroup-B1ALbDtP.js";import{C as p}from"./CInputGroupText-sUutiNQR.js";import{C as x}from"./CFormInput-CLp7rr_o.js";const J=()=>{const[t,h]=r.useState(""),[o,u]=r.useState(""),[i,n]=r.useState(""),l=C(),j=async s=>{s.preventDefault();try{const a=await L.post("http://localhost:8000/api/login",{email:t,password:o});a.data.success?(sessionStorage.setItem("user",JSON.stringify(a.data.user)),sessionStorage.setItem("role",a.data.role),g(a.data.role)):n("Invalid email or password")}catch(a){console.error("Login error:",a),n("Login failed. Please check your credentials.")}},g=s=>{s==="admin"?l("/dashboard"):s==="employee"?l("/portal"):alert("Unauthorized role")};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(y,{children:e.jsx(b,{className:"justify-content-center",children:e.jsx(m,{md:7,lg:6,xl:6,children:e.jsx(S,{className:"mx-4",children:e.jsx(I,{className:"p-4",children:e.jsxs(E,{onSubmit:j,children:[e.jsx("h1",{className:"text-center",children:"Login"}),e.jsx("p",{className:"text-secondary text-center",children:"Sign in to your account"}),i&&e.jsx(F,{color:"danger",children:i}),e.jsxs(d,{className:"mb-3",children:[e.jsx(p,{children:e.jsx(c,{icon:N})}),e.jsx(x,{type:"email",id:"email",value:t,onChange:s=>h(s.target.value),placeholder:"Email",required:!0})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(p,{children:e.jsx(c,{icon:v})}),e.jsx(x,{type:"password",id:"password",value:o,onChange:s=>u(s.target.value),placeholder:"Password",required:!0})]}),e.jsx(w,{type:"submit",color:"primary",className:"w-100",children:"Login"}),e.jsx(m,{className:"text-center",children:e.jsxs("p",{className:"mt-3",children:["Dont have an account?"," ",e.jsx(f,{to:"/register",className:"text-primary",children:"Register here"})]})})]})})})})})})})};export{J as default};
