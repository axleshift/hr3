import{r as c,j as s,m as u}from"./index-B2aix9KR.js";import{C as h,a as C}from"./CRow-CU-N2l_l.js";import{C as g,a as f}from"./CCardBody-Bi-lKLub.js";import{C as x}from"./CCardHeader-D_7P0Vmw.js";import{C as j}from"./CAlert-rMaGncUA.js";import{C as y}from"./CForm-Boo0dlJK.js";import{C as l}from"./CFormInput-D93PkL8z.js";import{a as b}from"./index-Bf5m5UD6.js";import"./CFormControlWrapper-DCmr6wFL.js";const F=()=>{const[e,m]=c.useState({cpassword:"",npassword:"",cnpassword:""}),[r,p]=c.useState({}),[o,t]=c.useState({visible:!1,type:"",message:""}),d=n=>{m({...e,[n.target.name]:n.target.value})},w=async n=>{n.preventDefault();const a={};if(e.cpassword.trim()||(a.cpassword="Current Password is Required"),e.npassword.trim()||(a.npassword="New Password is Required"),e.cnpassword.trim()?e.npassword!==e.cnpassword&&(a.cnpassword="New Password and Confirm New Password do not match"):a.cnpassword="Confirm New Password is Required",Object.keys(a).length>0){p(a);return}try{const i=await u.post("/changepassword",{...e,userId:user.id});i.data.status==="success"?(t({visible:!0,type:"success",message:"Password changed successfully."}),setTimeout(()=>{logout()},2e3)):t({visible:!0,type:"danger",message:i.data.message||"An error occurred while processing your request. Please try again later."})}catch{t({visible:!0,type:"danger",message:"An error occurred while processing your request. Please try again later."})}};return s.jsx(h,{children:s.jsx(C,{children:s.jsxs(g,{className:"mb-2",children:[s.jsx(x,{className:"center-left",children:s.jsx("strong",{children:"Change Password"})}),s.jsxs(f,{children:[o.visible&&s.jsx(j,{color:o.type,onClose:()=>t({...o,visible:!1}),dismissible:!0,children:o.message}),s.jsxs(y,{onSubmit:w,children:[s.jsx(l,{type:"password",name:"cpassword",placeholder:"Enter Current Password",onChange:d,className:"mb-4"}),r.cpassword&&s.jsx("span",{className:"text-danger",children:r.cpassword}),s.jsx(l,{type:"password",name:"npassword",placeholder:"Enter New Password",onChange:d,className:"mb-4"}),r.npassword&&s.jsx("span",{className:"text-danger",children:r.npassword}),s.jsx(l,{type:"password",name:"cnpassword",placeholder:"Confirm New Password",onChange:d,className:"mb-4"}),r.cnpassword&&s.jsx("span",{className:"text-danger",children:r.cnpassword}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(b,{type:"submit",color:"primary",children:"Submit"})})]})]})]})})})};export{F as default};
