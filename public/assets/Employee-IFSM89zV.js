import{r as t,j as e,C as D}from"./index-DLmnIqy-.js";import{a as d,F as v,r as T}from"./index-BzeTyS9E.js";import{a as m}from"./api-DwbPoVFv.js";import{C as _,a as A}from"./CCardBody-DfS5_nuD.js";import{C as F}from"./CCardHeader-BhAXpAMg.js";import{C as M,a as N,b as y,c as o,d as P,e as n}from"./CTable-DPZp-y3R.js";import{C as B,a as H,b as I,c as q}from"./CModalTitle-C2yBrXNe.js";import{C as h}from"./CFormControlWrapper-BnNbabf9.js";import{C as p}from"./CFormInput-Dw_omB7Q.js";import{C as J}from"./CModalFooter-BqkdO2U_.js";import"./index-xsH4HHeE.js";import"./DefaultLayout-da0zcv8b.js";const X=()=>{const[u,i]=t.useState([]),[f,j]=t.useState(!0),[b,l]=t.useState(!1),[x,g]=t.useState({job_position:"",department:"",salary:"",employee_id:""});t.useEffect(()=>{C()},[]);const C=async()=>{j(!0);try{const r=await m.get("/employees");if(Array.isArray(r.data)){const s=await Promise.all(r.data.map(async a=>{const w=await S(a.department,a.job_position);return{...a,salary:w}}));i(s)}else i([])}catch(r){console.error("Error fetching employees:",r),i([])}finally{j(!1)}},S=async(r,s)=>{try{const a=await m.get("/salaries",{params:{department:r,job_position:s}});return a.data?a.data:null}catch(a){return console.error("Error fetching salary:",a),null}},c=r=>{g({...x,[r.target.name]:r.target.value})},E=async r=>{r.preventDefault();try{await m.post("/salaries",x),l(!1),C()}catch(s){console.error("Error submitting salary:",s)}};return e.jsxs(_,{children:[e.jsxs(F,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Employee"}),e.jsx("div",{className:"float-end",children:e.jsx(d,{color:"primary",onClick:()=>l(!0),children:e.jsx(v,{icon:T})})})]}),e.jsx(A,{children:f?e.jsxs("div",{className:"text-center",children:[e.jsx(D,{color:"primary"}),e.jsx("p",{children:"Loading..."})]}):e.jsxs(M,{hover:!0,responsive:!0,children:[e.jsx(N,{children:e.jsxs(y,{children:[e.jsx(o,{children:"Employee ID"}),e.jsx(o,{className:"center-text",children:"Name"}),e.jsx(o,{children:"Job Position"}),e.jsx(o,{children:"Department"}),e.jsx(o,{children:"Salary"})]})}),e.jsx(P,{children:u.map(r=>e.jsxs(y,{children:[e.jsx(n,{children:r.employee_id}),e.jsx(n,{children:r.name}),e.jsx(n,{children:r.job_position}),e.jsx(n,{children:r.department}),e.jsx(n,{children:r.salary?`${r.salary.salary}`:"N/A"})]},r.id))})]})}),e.jsxs(B,{visible:b,onClose:()=>l(!1),children:[e.jsx(H,{children:e.jsx(I,{children:"Add Salary"})}),e.jsx(q,{children:e.jsxs("form",{onSubmit:E,children:[e.jsx(h,{children:"Job Position"}),e.jsx(p,{name:"job_position",placeholder:"Job Position",onChange:c,required:!0}),e.jsx(h,{children:"Department"}),e.jsx(p,{name:"department",placeholder:"Department",onChange:c,required:!0}),e.jsx(h,{children:"Salary"}),e.jsx(p,{type:"number",name:"salary",placeholder:"Salary",onChange:c,required:!0}),e.jsx(d,{type:"submit",color:"primary",children:"Add Salary"})]})}),e.jsx(J,{children:e.jsx(d,{color:"secondary",onClick:()=>l(!1),children:"Cancel"})})]})]})};export{X as default};
