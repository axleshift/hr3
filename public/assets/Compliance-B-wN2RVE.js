import{r as o,j as e}from"./index-CD-NJnkg.js";import{a as n}from"./api-rGiqx8rl.js";import{a as i,F as h,r as M,s as T,t as w}from"./index-DeBBGyvN.js";import{C as D,a as k}from"./CCardBody-DyFzM2Ly.js";import{C as B}from"./CCardHeader-BhrbU1Pe.js";import{C as A,a as H,b as j,c as l,d as I,e as c}from"./CTable-pqzZLYyp.js";import{C as N,a as q,b as R,c as V}from"./CModalTitle-BnWPEEUA.js";import{C as $}from"./CForm-DcB6j_ii.js";import{C as f}from"./CFormInput-B0AaJpyw.js";import{C as L}from"./CFormSelect-CwpEuRxZ.js";import{C as P}from"./CModalFooter-BNlOJ0Ac.js";import"./index-xsH4HHeE.js";import"./DefaultLayout-DPTQgNH1.js";import"./CFormControlWrapper-CaZ-vSMc.js";const se=()=>{const[b,v]=o.useState([]),[y,r]=o.useState(!1),[d,u]=o.useState(!1),[s,m]=o.useState({id:null,name:"",description:"",status:"active"});o.useEffect(()=>{p()},[]);const p=async()=>{try{const a=await n.get("/compliances");v(a.data)}catch(a){console.error("Error fetching compliances:",a)}},C=a=>{const{name:t,value:F}=a.target;m({...s,[t]:F})},x=async a=>{a.preventDefault();try{d?await n.put(`/compliances/${s.id}`,s):await n.post("api/compliances",s),p(),r(!1),S()}catch(t){console.error("Error saving compliance:",t)}},g=a=>{m({id:a.id,name:a.name,description:a.description,status:a.status}),u(!0),r(!0)},E=async a=>{try{await n.delete(`/compliances/${a}`),p()}catch(t){console.error("Error deleting compliance:",t)}},S=()=>{m({id:null,name:"",description:"",status:"active"}),u(!1)};return e.jsxs(D,{children:[e.jsxs(B,{children:[e.jsx("strong",{children:"Compliance List"}),e.jsx(i,{color:"primary",className:"float-right",onClick:()=>r(!0),children:e.jsx(h,{icon:M})})]}),e.jsx(k,{children:e.jsxs(A,{children:[e.jsx(H,{children:e.jsxs(j,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(I,{children:b.map(a=>e.jsxs(j,{children:[e.jsx(c,{children:a.name}),e.jsx(c,{children:a.description}),e.jsx(c,{children:a.status}),e.jsxs(c,{children:[e.jsx(i,{color:"primary",onClick:()=>g(a),children:e.jsx(h,{icon:T})}),e.jsx(i,{color:"danger",onClick:()=>E(a.id),children:e.jsx(h,{icon:w})})]})]},a.id))})]})}),e.jsxs(N,{show:y,onClose:()=>r(!1),children:[e.jsx(q,{closeButton:!0,children:e.jsx(R,{children:d?"Edit Compliance":"Add Compliance"})}),e.jsx(V,{children:e.jsxs($,{onSubmit:x,children:[e.jsx(f,{type:"text",name:"name",label:"Name",value:s.name,onChange:C,required:!0}),e.jsx(f,{type:"text",name:"description",label:"Description",value:s.description,onChange:C}),e.jsx(L,{name:"status",label:"Status",value:s.status,onChange:C,options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],required:!0})]})}),e.jsxs(P,{children:[e.jsx(i,{color:"secondary",onClick:()=>r(!1),children:"Close"}),e.jsx(i,{color:"primary",onClick:x,children:d?"Update":"Save"})]})]})]})};export{se as default};
