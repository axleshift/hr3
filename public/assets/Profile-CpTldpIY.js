import{r as l,j as e}from"./index-BregGavu.js";import{a as h}from"./axios-DXsv3KKR.js";import{b as y,c as j}from"./DefaultLayout-CNKZtyqM.js";import{C as c}from"./CFormInput-CLp7rr_o.js";import{a as u}from"./index-2GwXPYeC.js";const P=()=>{const[t,n]=l.useState({firstName:"",lastName:"",email:"",profilePicture:""}),[s,m]=l.useState(!1),[d,p]=l.useState("");l.useEffect(()=>{(async()=>{try{const a=await h.get("http://localhost:8000/api/user");n(a.data)}catch{p("Failed to fetch user data. Please try again later.")}})()},[]);const f=()=>{m(!s)},o=r=>{const{name:a,value:i}=r.target;n({...t,[a]:i})},x=r=>{const a=r.target.files[0];if(a){const i=new FileReader;i.onloadend=()=>{n({...t,profilePicture:i.result})},i.readAsDataURL(a)}},g=async r=>{r.preventDefault();try{await h.put("http://localhost:8000/api/user",t),m(!1)}catch{p("Failed to update user data. Please try again later.")}};return e.jsxs("div",{className:"profile-container",style:{textAlign:"center"},children:[d&&e.jsx("div",{className:"alert alert-danger",children:d}),e.jsx("div",{className:"profile-pic-container",style:{marginBottom:"20px"},children:e.jsx(y,{src:t.profilePicture||j,size:"lg"})}),e.jsxs("div",{className:"user-details",children:[e.jsx("h2",{children:t.nameName}),e.jsx("p",{children:t.email})]}),e.jsxs("form",{onSubmit:g,style:{textAlign:"center"},children:[e.jsx(c,{type:"text",name:"firstName",value:t.firstName,onChange:o,disabled:!s,placeholder:"First Name",style:{marginBottom:"10px"}}),e.jsx(c,{type:"text",name:"lastName",value:t.lastName,onChange:o,disabled:!s,placeholder:"Last Name",style:{marginBottom:"10px"}}),e.jsx(c,{type:"email",name:"email",value:t.email,onChange:o,disabled:!s,placeholder:"Email",style:{marginBottom:"10px"}}),e.jsx("input",{type:"file",onChange:x,disabled:!s,style:{marginBottom:"10px"}}),t.profilePicture&&e.jsx("img",{src:t.profilePicture,alt:"Profile",width:"100"}),e.jsxs("div",{children:[e.jsx(u,{type:"button",onClick:f,children:s?"Cancel":"Edit"}),s&&e.jsx(u,{type:"submit",style:{marginLeft:"10px"},children:"Save"})]})]})]})};export{P as default};
