import{i as C,r as u,j as e}from"./index-BregGavu.js";import{e as f}from"./employee-BtHkxQvA.js";import{a as g}from"./axios-DXsv3KKR.js";import{C as m,a as n}from"./CRow-DCQtSTwn.js";import{C as N,a as v}from"./CCardBody--BWERNhg.js";import{C as b}from"./CCardHeader-BeNLNKIv.js";import{a as h}from"./index-2GwXPYeC.js";import{C as I}from"./CForm-CaJJHpdi.js";import{C as S}from"./CAlert-BFvSB2mm.js";import{C as i,a as D}from"./CFormInput-CLp7rr_o.js";import{C as T}from"./CInputGroup-B1ALbDtP.js";import{C as E}from"./CFormSelect-CU7ZVpMm.js";const L=()=>{const d=C(),[o,s]=u.useState({employeeId:"",employeeName:"",deductionType:"",amount:""}),[c,l]=u.useState(""),p=r=>{const{name:a,value:t}=r.target;s({...o,[a]:t})},x=r=>{const a=r.target.value;if(s({...o,employeeId:a}),a){const t=f.find(j=>j.employee_id.toString()===a);t?(s({...o,employeeName:t.name}),l("")):(l("Employee not found"),s({...o,employeeName:""}))}else l(""),s({...o,employeeName:""})},y=async r=>{r.preventDefault();const a={employeeId:o.employeeId,employeeName:o.employeeName,deductionType:o.deductionType,amount:Math.round(o.amount)||0};try{const t=await g.post("http://localhost:8000/api/deduct",a);console.log("Saving deduction data:",t.data),d("/deduction")}catch(t){console.error("Error submitting deduction:",t),l("Something went wrong. Please try again later.")}};return e.jsx(m,{className:"justify-content-left",children:e.jsx(n,{xs:12,children:e.jsxs(N,{className:"mb-4",children:[e.jsxs(b,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{className:"flex-grow-1 text-start",children:"Add Deductions"}),e.jsx(h,{color:"danger",size:"sm",onClick:()=>d("/deduction"),children:"Back"})]}),e.jsx(v,{children:e.jsxs(I,{onSubmit:y,children:[c&&e.jsx(S,{color:"danger",children:c}),e.jsxs(m,{children:[e.jsx(n,{className:"mb-3",children:e.jsx(i,{type:"number",name:"employeeId",onChange:x,value:o.employeeId,label:"Employee ID"})}),e.jsx(n,{className:"mb-3",children:e.jsx(i,{type:"text",name:"employeeName",value:o.employeeName,label:"Employee Name",disabled:!0})}),e.jsxs(m,{children:[e.jsxs(n,{className:"mb-3",children:[e.jsx(D,{children:"Deduction Type"}),e.jsx(T,{children:e.jsxs(E,{name:"deductionType",value:o.deductionType,onChange:p,children:[e.jsx("option",{value:"",children:"Select Deduction Type"}),e.jsx("option",{value:"SSS",children:"SSS"}),e.jsx("option",{value:"PhilHealth",children:"PhilHealth"}),e.jsx("option",{value:"Pag-IBIG",children:"Pag-IBIG"}),e.jsx("option",{value:"Withholding Tax",children:"Withholding Tax"}),e.jsx("option",{value:"Other Deductions",children:"Other Deductions"})]})})]}),e.jsx(n,{className:"mb-3",children:e.jsx(i,{type:"number",name:"amount",value:o.amount,onChange:p,label:"Amount"})})]}),e.jsx(m,{children:e.jsx(n,{className:"mb-3",children:e.jsx(h,{type:"submit",color:"primary",children:"Save"})})})]})]})})]})})})};export{L as default};
