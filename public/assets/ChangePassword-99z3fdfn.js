import{r as c,j as s}from"./index-BregGavu.js";import{a as u}from"./axios-DXsv3KKR.js";import{C as h,a as C}from"./CRow-DCQtSTwn.js";import{C as g,a as x}from"./CCardBody--BWERNhg.js";import{C as f}from"./CCardHeader-BeNLNKIv.js";import{C as j}from"./CAlert-BFvSB2mm.js";import{C as y}from"./CForm-CaJJHpdi.js";import{C as l}from"./CFormInput-CLp7rr_o.js";import{a as b}from"./index-2GwXPYeC.js";const F=()=>{const[e,m]=c.useState({cpassword:"",npassword:"",cnpassword:""}),[r,p]=c.useState({}),[t,o]=c.useState({visible:!1,type:"",message:""}),d=n=>{m({...e,[n.target.name]:n.target.value})},w=async n=>{n.preventDefault();const a={};if(e.cpassword.trim()||(a.cpassword="Current Password is Required"),e.npassword.trim()||(a.npassword="New Password is Required"),e.cnpassword.trim()?e.npassword!==e.cnpassword&&(a.cnpassword="New Password and Confirm New Password do not match"):a.cnpassword="Confirm New Password is Required",Object.keys(a).length>0){p(a);return}try{const i=await u.post("http://127.0.0.1:8000/api/changepassword",{...e,userId:user.id});i.data.status==="success"?(o({visible:!0,type:"success",message:"Password changed successfully."}),setTimeout(()=>{logout()},2e3)):o({visible:!0,type:"danger",message:i.data.message||"An error occurred while processing your request. Please try again later."})}catch{o({visible:!0,type:"danger",message:"An error occurred while processing your request. Please try again later."})}};return s.jsx(h,{children:s.jsx(C,{xs:10,md:8,children:s.jsxs(g,{className:"mb-2",children:[s.jsx(f,{className:"d-flex justify-content-center align-items-center",children:s.jsx("strong",{className:"text-uppercase fw-bold text-center",children:"Change Password"})}),s.jsxs(x,{children:[t.visible&&s.jsx(j,{color:t.type,onClose:()=>o({...t,visible:!1}),dismissible:!0,children:t.message}),s.jsxs(y,{onSubmit:w,children:[s.jsx(l,{type:"password",name:"cpassword",placeholder:"Enter Current Password",onChange:d,className:"mb-4"}),r.cpassword&&s.jsx("span",{className:"text-danger",children:r.cpassword}),s.jsx(l,{type:"password",name:"npassword",placeholder:"Enter New Password",onChange:d,className:"mb-4"}),r.npassword&&s.jsx("span",{className:"text-danger",children:r.npassword}),s.jsx(l,{type:"password",name:"cnpassword",placeholder:"Confirm New Password",onChange:d,className:"mb-4"}),r.cnpassword&&s.jsx("span",{className:"text-danger",children:r.cnpassword}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(b,{type:"submit",color:"primary",children:"Submit"})})]})]})]})})})};export{F as default};
