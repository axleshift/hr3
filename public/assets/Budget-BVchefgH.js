import{r as l,j as e,C as S,m as F}from"./index-BqLRPtOi.js";import{C as D,a as T}from"./CCardBody-xSV0z4Hy.js";import{C as O}from"./CCardHeader-WD9awESC.js";import{C as j}from"./CAlert-CzEntJhO.js";import{C as N}from"./CForm-Ck1Oy9s_.js";import{C as c}from"./CFormSelect-DsSffqHJ.js";import{C as u}from"./CFormInput-CMvcMGT2.js";import{a as w}from"./index-BvyDmPkc.js";import"./CFormControlWrapper-BATfiNbG.js";const M=()=>{const[s,i]=l.useState({department:"",typeOfRequest:"",category:"",reason:"",totalRequest:"",documents:null}),[m,d]=l.useState(!1),[p,h]=l.useState(""),[C,g]=l.useState(!1),f=["Logistics","HR","Finance","IT","Operations"],y=["Training Cost","Equipment","Travel","Software","Payroll"],q=["Employee Development","Finance","Operational Costs","Technology","Miscellaneous"],r=t=>{const{name:a,value:o}=t.target;i(n=>({...n,[a]:o}))},b=t=>{i(a=>({...a,documents:t.target.files[0]}))},v=async t=>{var a,o;t.preventDefault(),d(!0),h(""),g(!1);try{const n=new FormData;for(const x in s)n.append(x,s[x]);await F.post("/budget-requests",n);const R={...s,status:"Pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await axios.post("https://finance/api/budgetRequest",R,{headers:{"Content-Type":"application/json"}}),g(!0),i({department:"",typeOfRequest:"",category:"",reason:"",totalRequest:"",documents:null})}catch(n){h(((o=(a=n.response)==null?void 0:a.data)==null?void 0:o.message)||"Failed to submit request")}finally{d(!1)}};return e.jsxs(D,{children:[e.jsx(O,{children:e.jsx("h5",{children:"Budget Request Form"})}),e.jsxs(T,{children:[p&&e.jsx(j,{color:"danger",children:p}),C&&e.jsx(j,{color:"success",children:"Request submitted successfully to both HR and Finance systems!"}),e.jsxs(N,{onSubmit:v,children:[e.jsx("div",{className:"mb-3",children:e.jsxs(c,{name:"department",value:s.department,onChange:r,label:"Department",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),f.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"mb-3",children:e.jsxs(c,{name:"typeOfRequest",value:s.typeOfRequest,onChange:r,label:"Type of Request",required:!0,children:[e.jsx("option",{value:"",children:"Select Request Type"}),y.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"mb-3",children:e.jsxs(c,{name:"category",value:s.category,onChange:r,label:"Category",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),q.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"mb-3",children:e.jsx(u,{type:"textarea",name:"reason",value:s.reason,onChange:r,label:"Reason for Request",required:!0})}),e.jsx("div",{className:"mb-3",children:e.jsx(u,{type:"number",name:"totalRequest",value:s.totalRequest,onChange:r,label:"Total Amount Requested",required:!0})}),e.jsx("div",{className:"mb-3",children:e.jsx(u,{type:"file",name:"documents",onChange:b,label:"Supporting Document"})}),e.jsx("div",{className:"d-grid gap-2",children:e.jsx(w,{type:"submit",color:"primary",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(S,{component:"span",size:"sm","aria-hidden":"true"}),"Submitting..."]}):"Submit Request"})})]})]})]})};export{M as default};
