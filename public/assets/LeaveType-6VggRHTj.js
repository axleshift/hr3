import{r as i,a as y,j as e}from"./index-CB7OUzk2.js";import{b as l,F as C,d as A,e as B,g as H}from"./Compliance-lCZO8XuK.js";import{C as U,a as V}from"./CCardBody-CmvYpM3N.js";import{C as q}from"./CCardHeader-BhOK-01F.js";import{C as z,a as D,b as u,c,d as I,e as o}from"./CTable-CNFJcFgE.js";import{C as T,a as L,b as N,c as g}from"./CModalTitle-Bjlw0HkJ.js";import{C as x}from"./CFormInput-CEPgCUNz.js";import{C as E}from"./CFormSelect-D7c-pNlG.js";import{C as P}from"./CModalFooter-CwrRIAph.js";import"./DefaultLayout-Ds5OGV6J.js";import"./CFormControlWrapper-BnsjPntT.js";const ae=()=>{const[d,p]=i.useState([]),[w,m]=i.useState(!1),[F,h]=i.useState(!1),[t,f]=i.useState({name:"",type:"Paid",pay_rate:0}),[r,b]=i.useState({id:null,name:"",type:"Paid",pay_rate:0});i.useEffect(()=>{M()},[]);const M=async()=>{try{const a=await y.get("/api/leave-types");Array.isArray(a.data)?p(a.data):console.error("Expected an array of leave types, but received:",a.data)}catch(a){console.error("Error fetching leave types:",a)}},v=a=>{const{name:s,value:n}=a.target;f({...t,[s]:n})},j=a=>{const{name:s,value:n}=a.target;b({...r,[s]:n})},R=async()=>{if(!t.name.trim()){alert("Leave type name is required");return}try{const a=await y.post("/api/leave-types",t);p([...d,a.data]),m(!1),f({name:"",type:"Paid",pay_rate:0})}catch(a){console.error("Error creating leave type:",a)}},S=async()=>{if(!r.name.trim()){alert("Leave type name is required");return}try{const a=await y.put(`/api/leave-types/${r.id}`,r),s=d.map(n=>n.id===r.id?a.data:n);p(s),h(!1)}catch(a){console.error("Error updating leave type:",a)}},_=async a=>{try{await y.delete(`/api/leave-types/${a}`),p(d.filter(s=>s.id!==a))}catch(s){console.error("Error deleting leave type:",s)}},k=a=>{b(a),h(!0)};return e.jsxs(U,{children:[e.jsxs(q,{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsx("strong",{children:"Leave Type List"}),e.jsx(l,{color:"primary",onClick:()=>m(!0),children:e.jsx(C,{icon:A})})]}),e.jsx(V,{children:e.jsx("div",{className:"table-responsive",children:e.jsxs(z,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(D,{children:e.jsxs(u,{children:[e.jsx(c,{children:"#"}),e.jsx(c,{children:"Leave Type"}),e.jsx(c,{children:"Type"}),e.jsx(c,{children:"Pay Rate"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(I,{children:d.length>0?d.map((a,s)=>e.jsxs(u,{children:[e.jsx(o,{children:s+1}),e.jsx(o,{children:a.name}),e.jsx(o,{children:a.type}),e.jsx(o,{children:a.pay_rate}),e.jsxs(o,{children:[e.jsx(l,{color:"info",size:"sm",className:"me-2",onClick:()=>k(a),children:e.jsx(C,{icon:B})}),e.jsx(l,{color:"danger",size:"sm",onClick:()=>_(a.id),children:e.jsx(C,{icon:H})})]})]},a.id)):e.jsx(u,{children:e.jsx(o,{colSpan:"6",className:"text-center",children:"No leave types found."})})})]})})}),e.jsxs(T,{visible:w,onClose:()=>m(!1),children:[e.jsx(L,{children:e.jsx(N,{children:"Create New Leave Type"})}),e.jsxs(g,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"leaveName",className:"form-label",children:"Leave Type Name"}),e.jsx(x,{type:"text",id:"leaveName",name:"name",value:t.name,onChange:v,placeholder:"Enter leave type name"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"leaveType",className:"form-label",children:"Leave Type"}),e.jsxs(E,{id:"leaveType",name:"type",value:t.type,onChange:v,children:[e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Unpaid",children:"Unpaid"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"payRate",className:"form-label",children:"Pay Rate"}),e.jsx(x,{type:"number",id:"payRate",name:"pay_rate",value:t.pay_rate,onChange:v,placeholder:"Enter pay rate"})]})]}),e.jsxs(P,{children:[e.jsx(l,{color:"secondary",onClick:()=>m(!1),children:"Close"}),e.jsx(l,{color:"primary",onClick:R,children:"Save Changes"})]})]}),e.jsxs(T,{visible:F,onClose:()=>h(!1),children:[e.jsx(L,{children:e.jsx(N,{children:"Edit Leave Type"})}),e.jsxs(g,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"editLeaveName",className:"form-label",children:"Leave Type Name"}),e.jsx(x,{type:"text",id:"editLeaveName",name:"name",value:r.name,onChange:j,placeholder:"Enter leave type name"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"editLeaveType",className:"form-label",children:"Leave Type"}),e.jsxs(E,{id:"editLeaveType",name:"type",value:r.type,onChange:j,children:[e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Unpaid",children:"Unpaid"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"editPayRate",className:"form-label",children:"Pay Rate"}),e.jsx(x,{type:"number",id:"editPayRate",name:"pay_rate",value:r.pay_rate,onChange:j,placeholder:"Enter pay rate"})]})]}),e.jsxs(P,{children:[e.jsx(l,{color:"secondary",onClick:()=>h(!1),children:"Close"}),e.jsx(l,{color:"primary",onClick:S,children:"Save Changes"})]})]})]})};export{ae as default};
