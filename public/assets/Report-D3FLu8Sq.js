import{r as s,j as e,x as v}from"./index-CjY3Wu99.js";import{C as S,a as D}from"./CCardBody-CUofzSwn.js";import{C as w}from"./CCardHeader-B8cKeriJ.js";import{C as j}from"./CFormSelect-BMMFIN56.js";import{C as T,a as N,b as i,c as r,d as E,e as l,f as F}from"./CTable-BMQ723iz.js";import"./CFormControlWrapper-CF9aZuRb.js";const L=()=>{const[o,p]=s.useState([]),[h,x]=s.useState(null),[c,u]=s.useState(new Date().getFullYear()),[d,y]=s.useState(new Date().getMonth()+1),[g,m]=s.useState(!1),f=Array.from({length:new Date().getFullYear()-2020+1},(a,t)=>2020+t),C=async()=>{try{m(!0);const a=await v.get("http://localhost:8000/api/payroll",{params:{year:c,month:d}}),t=a.data.payroll||a.data;Array.isArray(t)?p(t):x("Invalid payroll data format.")}catch{x("Error fetching payroll data.")}finally{m(!1)}};s.useEffect(()=>{C()},[c,d]);const b=()=>o.reduce((a,t)=>a+parseFloat(t.net_salary||0),0),n=a=>parseFloat(a).toLocaleString("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2});return e.jsxs(S,{className:"mb-4",children:[e.jsxs(w,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Payroll Report"}),e.jsxs("div",{className:"float-end",children:[e.jsx(j,{value:d,onChange:a=>y(parseInt(a.target.value)),style:{width:"120px",display:"inline-block",marginRight:"10px"},children:Array.from({length:12},(a,t)=>e.jsx("option",{value:t+1,children:new Date(2023,t).toLocaleString("default",{month:"long"})},t+1))}),e.jsx(j,{value:c,onChange:a=>u(parseInt(a.target.value)),style:{width:"90px",display:"inline-block",marginRight:"10px"},children:f.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs(D,{children:[h&&e.jsx("div",{style:{color:"red"},children:h}),g?e.jsx("div",{children:"Loading payroll data..."}):e.jsxs(T,{hover:!0,bordered:!0,responsive:!0,children:[e.jsx(N,{children:e.jsxs(i,{children:[e.jsx(r,{children:"Employee ID"}),e.jsx(r,{children:"Employee Name"}),e.jsx(r,{children:"Overtime"}),e.jsx(r,{children:"Bonus"}),e.jsx(r,{children:"Deduction"}),e.jsx(r,{children:"Net Salary"})]})}),e.jsx(E,{children:o.length>0?o.map(a=>e.jsxs(i,{children:[e.jsx(l,{children:a.employee_id}),e.jsx(l,{children:a.name}),e.jsx(l,{children:n(a.total_overtime_amount)}),e.jsx(l,{children:n(a.bonus)}),e.jsx(l,{children:n(a.deduction)}),e.jsx(l,{children:n(a.net_salary)})]},a.id)):e.jsx(i,{children:e.jsx(l,{colSpan:"6",className:"text-right",children:"No payroll data available"})})}),e.jsx(F,{children:o.length>0&&e.jsxs(i,{children:[e.jsx(r,{colSpan:"4"}),e.jsx(r,{children:"Total:"}),e.jsx(r,{children:n(b())})]})})]})]})]})};export{L as default};
