import{r as s,j as e}from"./index-CCQjMedi.js";import{a as I,w as N}from"./api-DtbWpsV7.js";import{C as h,a as f}from"./CRow-DNMWGK06.js";import{C as T,a as w}from"./CCardBody-CfIUcbl0.js";import{C as F}from"./CCardHeader-DSNy9un6.js";import{C as c,a as d}from"./CInputGroupText-EGGT-giD.js";import{C as _}from"./CFormInput-BrW2xO6p.js";import{C as E}from"./CFormSelect-Ba8ZMqlB.js";import"./CFormControlWrapper-WmVgiADm.js";const U=()=>{const[l,x]=s.useState(""),[j,m]=s.useState(""),[C,u]=s.useState(""),[v,p]=s.useState(""),[y,i]=s.useState(!1),[b,o]=s.useState(null),g="http://127.0.0.1:8000/api/benefits",D=async()=>{var n,a,B;i(!0),o(null);const t={employee_name:j,benefit_type:C,status:v};try{const r=await N.post(g,t);console.log("Success:",r.data),alert("Benefit saved successfully!"),S()}catch(r){console.error("Error:",((n=r.response)==null?void 0:n.data)||r.message),o(((B=(a=r.response)==null?void 0:a.data)==null?void 0:B.error)||"Failed to submit data.")}finally{i(!1)}};s.useEffect(()=>{if(!l)return;(async()=>{i(!0);try{const a=(await N.get(`${g}/${l}`)).data;m(a.employee_name),u(a.benefit_type),p(a.status)}catch(n){console.error("Fetch error:",n),o("Error fetching benefit details.")}finally{i(!1)}})()},[l]);const S=()=>{x(""),m(""),u(""),p(""),o(null)};return e.jsx(h,{children:e.jsx(f,{xs:12,children:e.jsxs(T,{className:"mb-4",children:[e.jsx(F,{children:e.jsx("strong",{children:"Employee Benefits"})}),e.jsxs(w,{children:[b&&e.jsx("p",{style:{color:"red"},children:b}),e.jsxs(c,{className:"mb-3",children:[e.jsx(d,{children:"Benefit ID:"}),e.jsx(_,{disabled:!0,placeholder:"Auto-generated",value:l,onChange:t=>x(t.target.value)})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(d,{children:"Employee Name:"}),e.jsx(_,{placeholder:"Enter employee name",value:j,onChange:t=>m(t.target.value)})]}),e.jsx(h,{children:e.jsx(f,{md:6,children:e.jsxs(c,{className:"mb-3",children:[e.jsx(d,{children:"Benefit Type:"}),e.jsxs(E,{value:C,onChange:t=>u(t.target.value),children:[e.jsx("option",{value:"",children:"Select benefit type"}),e.jsx("option",{value:"health_insurance",children:"Health Insurance"}),e.jsx("option",{value:"dental_insurance",children:"Dental Insurance"}),e.jsx("option",{value:"life_insurance",children:"Life Insurance"}),e.jsx("option",{value:"retirement_plan",children:"Retirement Plan"}),e.jsx("option",{value:"paid_time_off",children:"Paid Time Off"})]})]})})}),e.jsx(h,{children:e.jsx(f,{md:6,children:e.jsxs(c,{className:"mb-3",children:[e.jsx(d,{children:"Status:"}),e.jsxs(E,{value:v,onChange:t=>p(t.target.value),children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})})}),e.jsxs("div",{className:"d-flex justify-content-center",children:[e.jsx(I,{className:"mb-2 me-2",color:"primary",variant:"outline",onClick:D,disabled:y,children:y?"Submitting...":"Submit"}),e.jsx(I,{className:"mb-2",color:"primary",variant:"outline",onClick:S,children:"Clear"})]})]})]})})})};export{U as default};
