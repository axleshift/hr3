import{i as y,j as e,r as o,k as I,C as L,L as k,m as _,l as E}from"./index-B63zcX1K.js";import{b as C,F as x,f as F,c as P,a as R}from"./index-BPfuhMRE.js";import{C as u,a as h}from"./CRow-CsICDqGc.js";import{C as T,a as A}from"./CCardBody-BSCjh9-L.js";import{C as U}from"./CForm-CHr0BBQo.js";import{C as D}from"./CAlert-COx4c459.js";import{C as f}from"./CInputGroup-BFc-Zkld.js";import{C as j}from"./CInputGroupText-C3mLWjN5.js";import{C as g}from"./CFormInput-CtV-233B.js";import"./CFormControlWrapper-DLGqhF_m.js";const q=()=>{const r=y();return e.jsx(C,{fluid:!0,children:e.jsx("footer",{className:"p-2 p-md- ",children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top",children:[e.jsx("p",{children:"Â© 2025 Axleshift HR 3. All Rights Reserved"}),e.jsxs("ul",{className:"list-unstyled d-flex",children:[e.jsx("li",{className:"ms-3",children:e.jsx("span",{className:"link-body-emphasis",onClick:()=>r("/privacy-policy"),children:"Privacy Policy"})}),e.jsx("li",{className:"ms-3",children:e.jsx("span",{className:"link-body-emphasis",onClick:()=>r("/Services"),children:"Terms of Service"})})]})]})})})},V=()=>{const[r,v]=o.useState(""),[i,N]=o.useState(""),[n,l]=o.useState(!1),[t,c]=o.useState({visible:!1,type:"",message:""}),d=I(),b=y(),S=async a=>{var m,p;a.preventDefault(),l(!0);try{const s=await _.post("/auth/login",{username:r,password:i});d({type:"SET_USER",payload:s.data.user}),d({type:"SET_SESSION_ID",payload:s.data.session_id}),E.set("dcims",s.data.session_id,{expires:30}),sessionStorage.setItem("session_id",s.data.session_id),sessionStorage.setItem("role",s.data.user.role),sessionStorage.setItem("user_id",s.data.user.id),sessionStorage.setItem("name",s.data.user.name),b("/dashboard")}catch(s){const w=((p=(m=s.response)==null?void 0:m.data)==null?void 0:p.message)||"Login failed. Please check your credentials.";c({visible:!0,type:"danger",message:w})}finally{l(!1)}};return o.useEffect(()=>{if(t.visible){const a=setTimeout(()=>c({...t,visible:!1}),3e3);return()=>clearTimeout(a)}},[t]),e.jsxs("div",{className:"bg-light min-vh-100 d-flex flex-column",children:[e.jsx(C,{className:"flex-grow-1 d-flex flex-column justify-content-center",children:e.jsx(u,{className:"justify-content-center",children:e.jsx(h,{xs:12,sm:10,md:8,lg:5,children:e.jsx(T,{className:"shadow-sm p-4 border-0 rounded",children:e.jsx(A,{children:e.jsxs(U,{onSubmit:S,children:[e.jsx("h2",{className:"text-left fw-bold",children:"Login"}),e.jsx("p",{className:"text-left text-muted",children:"Sign in to your account"}),t.visible&&e.jsx(D,{color:t.type,className:"mb-3",children:t.message}),e.jsxs(f,{className:"mb-3",children:[e.jsx(j,{children:e.jsx(x,{icon:F})}),e.jsx(g,{type:"text",placeholder:"Username",value:r,onChange:a=>v(a.target.value),required:!0})]}),e.jsxs(f,{className:"mb-3",children:[e.jsx(j,{children:e.jsx(x,{icon:P})}),e.jsx(g,{type:"password",placeholder:"Password",value:i,onChange:a=>N(a.target.value),required:!0})]}),e.jsx(u,{children:e.jsx(h,{children:e.jsx(R,{type:"submit",color:"primary",className:"w-100",disabled:n,children:n?e.jsx(L,{component:"span",size:"sm","aria-hidden":"true"}):"Login"})})}),e.jsx("div",{className:"text-center mt-3",children:e.jsx(k,{to:"/ForgotPassword",className:"text-decoration-none",children:"Forgot password?"})})]})})})})})}),e.jsx(q,{})]})};export{V as default};
