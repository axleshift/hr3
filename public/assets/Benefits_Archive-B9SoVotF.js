import{r as l,i as S,j as e,C as B,R as w,m as f}from"./index-BFybcRJU.js";import{C as b,a as A}from"./CRow-JPOZFfhe.js";import{C as N,a as E}from"./CCardBody-SUgeTsWf.js";import{C as F}from"./CCardHeader-CZGYfOoB.js";import{C as R,a as T,b as d,c as i,d as _,e as a}from"./CTable-BQnISBd1.js";import{a as D}from"./index-Hz2p2rxh.js";import{C as h}from"./DefaultLayout-JmtK_VeK.js";const P=()=>{const[g,x]=l.useState([]),[m,u]=l.useState({}),[C,o]=l.useState(!1),[j,p]=l.useState(null);S();const y=async n=>{try{o(!0),await f.put(`/benefits/${n}`,{status:"Active"});const r=g.filter(s=>s.id!==n);x(r);const c=r.reduce((s,t)=>(s[t.employee_id]||(s[t.employee_id]=[]),s[t.employee_id].push(t),s),{});u(c),alert("Benefit restored successfully!")}catch(r){console.error("Error restoring benefit:",r),p("Failed to restore benefit.")}finally{o(!1)}};l.useEffect(()=>{(async()=>{try{o(!0);const r=await f.get("/benefits?status=Inactive");x(r.data);const c=r.data.reduce((s,t)=>(s[t.employee_id]||(s[t.employee_id]=[]),s[t.employee_id].push(t),s),{});u(c)}catch(r){console.error("Error fetching archived benefits:",r),p("Failed to fetch archived benefits.")}finally{o(!1)}})()},[]);const v=n=>{switch(n){case"Active":return e.jsx(h,{color:"success",children:"Active"});case"Inactive":return e.jsx(h,{color:"danger",children:"Inactive"});default:return e.jsx(h,{color:"secondary",children:"Unknown"})}};return e.jsx(b,{children:e.jsx(A,{xs:12,children:e.jsxs(N,{className:"mb-4",children:[e.jsx(F,{className:"d-flex justify-content-between align-items-center flex-wrap gap-2",children:e.jsx("strong",{children:"Archived Benefits"})}),e.jsxs(E,{children:[j&&e.jsx("div",{className:"alert alert-danger mb-3",children:j}),e.jsxs(R,{hover:!0,responsive:!0,children:[e.jsx(T,{children:e.jsxs(d,{children:[e.jsx(i,{children:"ID"}),e.jsx(i,{children:"Employee ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Benefit Type"}),e.jsx(i,{children:"Amount"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Action"})]})}),e.jsx(_,{children:C?e.jsx(d,{children:e.jsxs(a,{colSpan:7,className:"text-center",children:[e.jsx(B,{}),e.jsx("span",{className:"ms-2",children:"Loading archived benefits..."})]})}):Object.keys(m).length===0?e.jsx(d,{children:e.jsx(a,{colSpan:7,className:"text-center",children:"No archived benefits found"})}):Object.entries(m).map(([n,r],c)=>e.jsx(w.Fragment,{children:r.map((s,t)=>e.jsxs(d,{children:[t===0&&e.jsxs(e.Fragment,{children:[e.jsx(a,{rowSpan:r.length,children:c+1}),e.jsx(a,{rowSpan:r.length,children:s.employee_id}),e.jsx(a,{rowSpan:r.length,children:s.name})]}),e.jsx(a,{children:s.type}),e.jsxs(a,{children:["â‚±",parseFloat(s.amount).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx(a,{children:v(s.status)}),e.jsx(a,{children:e.jsx(D,{color:"success",size:"sm",onClick:()=>y(s.id),children:"Restore"})})]},s.id))},n))})]})]})]})})})};export{P as default};
