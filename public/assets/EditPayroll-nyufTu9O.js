import{i as E,q as B,r as c,j as e,L as F}from"./index-BregGavu.js";import{a as x}from"./axios-DXsv3KKR.js";import{C as r,a as s}from"./CRow-DCQtSTwn.js";import{C as I,a as q}from"./CCardBody--BWERNhg.js";import{C as L}from"./CCardHeader-BeNLNKIv.js";import{C as w}from"./CForm-CaJJHpdi.js";import{C as l}from"./CFormInput-CLp7rr_o.js";import{C as j}from"./CFormSelect-CU7ZVpMm.js";import{C as D}from"./CInputGroup-B1ALbDtP.js";import{C as T}from"./CInputGroupText-sUutiNQR.js";import{a as f}from"./index-2GwXPYeC.js";const V=()=>{const i=E(),{id:d}=B(),[N,C]=c.useState(!0),[a,u]=c.useState({employeeName:"",basicSalary:"",overtime:"",bonus:"",deductions:"",hoursWorked:0,benefits:"",accountNumber:"",status:"Pending"}),[y,m]=c.useState(0),[b,p]=c.useState("");c.useEffect(()=>{x.get(`http://localhost:8000/api/edit-payroll/${d}`).then(t=>{t.data.status===200?(u({employeeName:t.data.payroll.employeeName||"",basicSalary:t.data.payroll.basicSalary||"0",overtime:t.data.payroll.overtime||"0",bonus:t.data.payroll.bonus||"0",deductions:t.data.payroll.deductions||"0",hoursWorked:t.data.payroll.hoursWorked||"0",benefits:t.data.payroll.benefits||"0",accountNumber:t.data.payroll.accountNumber||"",status:t.data.payroll.status||"Pending"}),p(t.data.payroll.paymentMethod||""),m(t.data.payroll.netSalary||0),C(!1)):t.data.status===404&&i("/payroll")})},[d,i]),c.useEffect(()=>{(()=>{const h=parseFloat(a.basicSalary)||0,o=parseFloat(a.overtime)||0,P=parseFloat(a.benefits)||0,k=parseFloat(a.bonus)||0,M=parseFloat(a.deductions)||0,W=h+o+k-(M+P);m(W)})()},[a]);const n=t=>{t.persist(),u({...a,[t.target.name]:t.target.value})},g=()=>{u({employeeName:"",basicSalary:"",overtime:"",bonus:"",deductions:"",hoursWorked:0,benefits:"",accountNumber:""}),m(0),p("")},v=t=>{p(t.target.value)},S=async t=>{t.preventDefault();const h={employeeName:a.employeeName,basicSalary:Math.round(a.basicSalary),overtime:Math.round(a.overtime)||0,benefits:Math.round(a.benefits)||0,bonus:Math.round(a.bonus)||0,deductions:Math.round(a.deductions)||0,netSalary:Math.round(y),hoursWorked:a.hoursWorked,paymentMethod:b,accountNumber:a.accountNumber||null};try{const o=await x.put(`http://localhost:8000/api/payrolls/${d}`,h);o.data.status===200?i("/payroll"):o.data.status}catch(o){console.error("Error updating payroll:",o)}};return N?e.jsx("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"70vh"},children:e.jsx("strong",{children:"Loading Payroll Data..."})}):e.jsx(r,{className:"justify-content-left",children:e.jsx(s,{xs:12,children:e.jsxs(I,{className:"mb-4",children:[e.jsxs(L,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{className:"flex-grow-1 text-start",children:"Edit Payroll"}),e.jsx(F,{to:"/payroll",className:"btn btn-danger btn-sm",children:"Back"})]}),e.jsx(q,{children:e.jsxs(w,{onSubmit:S,children:[e.jsx(r,{children:e.jsx(s,{className:"mb-3",children:e.jsx(l,{type:"text",name:"employeeName",onChange:n,value:a.employeeName,label:"Employee Name",required:!0})})}),e.jsxs(r,{children:[e.jsx(s,{className:"mb-3",children:e.jsx(l,{type:"number",name:"basicSalary",onChange:n,value:a.basicSalary,label:"Basic Salary",required:!0})}),e.jsx(s,{className:"mb-3",children:e.jsx(l,{type:"number",name:"overtime",onChange:n,value:a.overtime,label:"Overtime"})}),e.jsx(s,{className:"mb-3",children:e.jsx(l,{type:"number",name:"bonus",onChange:n,value:a.bonus,label:"Bonus"})})]}),e.jsxs(r,{children:[e.jsx(s,{className:"mb-3",children:e.jsx(l,{type:"number",name:"hoursWorked",onChange:n,value:a.hoursWorked,label:"Hours Worked"})}),e.jsx(s,{className:"mb-3",children:e.jsx(l,{type:"number",name:"deductions",onChange:n,value:a.deductions,label:"Deductions"})}),e.jsx(s,{className:"mb-3",children:e.jsx(l,{type:"number",name:"benefits",onChange:n,value:a.benefits,label:"Benefits"})})]}),e.jsxs(r,{children:[e.jsx(s,{className:"mb-3",children:e.jsxs(j,{name:"paymentMethod",onChange:v,value:b,label:"Payment Method",required:!0,children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"E-Wallet",children:"E-Wallet"})]})}),e.jsx(s,{className:"mb-3",children:e.jsx(l,{type:"number",name:"accountNumber",onChange:n,value:a.accountNumber,label:"Account Number"})})]}),e.jsx(r,{children:e.jsx(s,{className:"mb-3",children:e.jsxs(j,{name:"status",onChange:n,value:a.status,label:"Payroll Status",required:!0,children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Processed",children:"Processed"})]})})}),e.jsx(r,{className:"align-items-center",children:e.jsx(s,{className:"mb-3 d-flex align-items-center",children:e.jsxs(D,{className:"mb-3",children:[e.jsx(T,{id:"basic-addon-net-salary",children:"Net Salary:"}),e.jsx(l,{placeholder:"Net Salary","aria-label":"Net Salary","aria-describedby":"basic-addon-net-salary",value:Math.round(y).toLocaleString(),readOnly:!0})]})})}),e.jsxs(s,{className:"d-flex justify-content-center align-items-center gap-6",children:[e.jsx(f,{type:"submit",color:"primary",children:"Save"}),e.jsx(f,{className:"ms-2",type:"button",onClick:g,color:"secondary",children:"Clear"})]})]})})]})})})};export{V as default};
