import{r as d,_ as x,R as o,a as C,c as y,P as s,b,i as E,j as a,x as R}from"./index-CjY3Wu99.js";import{b as w,F as p,t as L,n as T,v as S}from"./index-BUiZWHIW.js";import{C as F,a as u}from"./CRow-DJekRBla.js";import{C as P,a as k}from"./CCardBody-CUofzSwn.js";var f=d.forwardRef(function(e,t){var n=e.children,c=e.className,r=x(e,["children","className"]);return o.createElement("div",C({className:y("card-footer",c)},r,{ref:t}),n)});f.propTypes={children:s.node,className:s.string};f.displayName="CCardFooter";var i=d.forwardRef(function(e,t){var n=e.className,c=e.color,r=e.footer,m=e.icon,l=e.padding,g=l===void 0?!0:l,h=e.title,j=e.value,N=x(e,["className","color","footer","icon","padding","title","value"]);return o.createElement(P,C({className:n},N,{ref:t}),o.createElement(k,{className:"d-flex align-items-center ".concat(g===!1&&"p-0")},o.createElement("div",{className:"me-3 text-white bg-".concat(c," ").concat(g?"p-3":"p-4")},m),o.createElement("div",null,o.createElement("div",{className:"fs-6 fw-semibold text-".concat(c)},j),o.createElement("div",{className:"text-body-secondary text-uppercase fw-semibold small"},h))),r&&o.createElement(f,null,r))});i.propTypes={className:s.string,color:b,footer:s.oneOfType([s.string,s.node]),icon:s.oneOfType([s.string,s.node]),padding:s.bool,title:s.oneOfType([s.string,s.node]),value:s.oneOfType([s.string,s.node,s.number])};i.displayName="CWidgetStatsF";const v=async e=>{try{return(await R.get(`/leave-requests/count/${e}`)).data.count}catch(t){return console.error(`Error fetching count for status ${e}:`,t),0}},B=()=>{const e=E(),[t,n]=d.useState({pendingRequests:0,approvedLeaves:0,rejectedLeaves:0});return d.useEffect(()=>{(async()=>{try{const r=await v("Pending"),m=await v("Approved"),l=await v("Rejected");n({pendingRequests:r,approvedLeaves:m,rejectedLeaves:l})}catch(r){console.error("Error fetching leave stats:",r)}})()},[]),a.jsx(w,{fluid:!0,children:a.jsxs(F,{className:"g-3",children:[a.jsx(u,{xs:12,sm:6,md:4,lg:3,children:a.jsx("div",{onClick:()=>e("/Pending"),style:{cursor:"pointer"},children:a.jsx(i,{className:"mb-3 h-100",color:"warning",icon:a.jsx(p,{icon:L,size:"2x"}),title:"Pending Requests",value:t.pendingRequests,padding:!0})})}),a.jsx(u,{xs:12,sm:6,md:4,lg:3,children:a.jsx("div",{onClick:()=>e("/Approved"),style:{cursor:"pointer"},children:a.jsx(i,{className:"mb-3 h-100",color:"success",icon:a.jsx(p,{icon:T,size:"2x"}),title:"Approved Leaves",value:t.approvedLeaves,padding:!0})})}),a.jsx(u,{xs:12,sm:6,md:4,lg:3,children:a.jsx("div",{onClick:()=>e("/Rejected"),style:{cursor:"pointer"},children:a.jsx(i,{className:"mb-3 h-100",color:"danger",icon:a.jsx(p,{icon:S,size:"2x"}),title:"Rejected Leaves",value:t.rejectedLeaves,padding:!0})})})]})})};export{B as Dashboard,B as default};
