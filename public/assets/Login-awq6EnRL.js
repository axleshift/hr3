import{i as v,j as e,r as i,k as L,C as E,L as R,l as T}from"./index-CD-NJnkg.js";import{b,F as u,p as A,f as F,a as P}from"./index-DeBBGyvN.js";import{a as q}from"./index-xsH4HHeE.js";import{C as f,a as j}from"./CRow-B5QvVoMI.js";import{C as _,a as B}from"./CCardBody-DyFzM2Ly.js";import{C as H}from"./CForm-DcB6j_ii.js";import{C as z}from"./CAlert-C_FjY2gZ.js";import{C as g}from"./CInputGroup-Clfd36BT.js";import{C as y}from"./CInputGroupText-DzEEppYd.js";import{C}from"./CFormInput-B0AaJpyw.js";import"./CFormControlWrapper-CaZ-vSMc.js";const D=()=>{const r=v();return e.jsx(b,{fluid:!0,children:e.jsx("footer",{className:"p-2 p-md- ",children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top",children:[e.jsx("p",{children:"Â© 2025 Axleshift HR 3. All Rights Reserved"}),e.jsxs("ul",{className:"list-unstyled d-flex",children:[e.jsx("li",{className:"ms-3",children:e.jsx("span",{className:"link-body-emphasis",onClick:()=>r("/privacy-policy"),children:"Privacy Policy"})}),e.jsx("li",{className:"ms-3",children:e.jsx("span",{className:"link-body-emphasis",onClick:()=>r("/Services"),children:"Terms of Service"})})]})]})})})},Z=()=>{const[r,N]=i.useState(""),[l,w]=i.useState(""),[c,m]=i.useState(!1),[t,d]=i.useState({visible:!1,type:"",message:""}),p=L(),S=v(),k=async s=>{var x,h;s.preventDefault(),m(!0);try{const n=await q.post("https://backend-admin.axleshift.com/integ/external-login/HR",{email:r,password:l},{headers:{Authorization:"Bearer admin1229102","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),{token:a,user:o}=n.data;if(!a||!o)throw new Error("Invalid response from authentication server");const I={expires:30,path:"/",secure:window.location.protocol==="https:",sameSite:"strict"};T.set("dcims",a,I),sessionStorage.setItem("session_id",a),sessionStorage.setItem("role",o.role),sessionStorage.setItem("user_id",o.id),sessionStorage.setItem("name",o.name),sessionStorage.setItem("department",o.department),p({type:"SET_USER",payload:o}),p({type:"SET_TOKEN",payload:a}),S("/dashboard")}catch(n){const a=((h=(x=n.response)==null?void 0:x.data)==null?void 0:h.message)||n.message||"Login failed. Please check your credentials.";d({visible:!0,type:"danger",message:a})}finally{m(!1)}};return i.useEffect(()=>{if(t.visible){const s=setTimeout(()=>d({...t,visible:!1}),3e3);return()=>clearTimeout(s)}},[t]),e.jsxs("div",{className:"bg-light min-vh-100 d-flex flex-column",children:[e.jsx(b,{className:"flex-grow-1 d-flex flex-column justify-content-center",children:e.jsx(f,{className:"justify-content-center",children:e.jsx(j,{xs:12,sm:10,md:8,lg:5,children:e.jsx(_,{className:"shadow-sm p-4 border-0 rounded",children:e.jsx(B,{children:e.jsxs(H,{onSubmit:k,children:[e.jsx("h2",{className:"text-left fw-bold",children:"Login"}),e.jsx("p",{className:"text-left text-muted",children:"Sign in to your account"}),t.visible&&e.jsx(z,{color:t.type,className:"mb-3",children:t.message}),e.jsxs(g,{className:"mb-3",children:[e.jsx(y,{children:e.jsx(u,{icon:A})}),e.jsx(C,{type:"text",placeholder:"email",value:r,onChange:s=>N(s.target.value),required:!0})]}),e.jsxs(g,{className:"mb-3",children:[e.jsx(y,{children:e.jsx(u,{icon:F})}),e.jsx(C,{type:"password",placeholder:"Password",value:l,onChange:s=>w(s.target.value),required:!0})]}),e.jsx(f,{children:e.jsx(j,{children:e.jsx(P,{type:"submit",color:"primary",className:"w-100",disabled:c,children:c?e.jsx(E,{component:"span",size:"sm","aria-hidden":"true"}):"Login"})})}),e.jsx("div",{className:"text-center mt-3",children:e.jsx(R,{to:"/ForgotPassword",className:"text-decoration-none",children:"Forgot password?"})})]})})})})})}),e.jsx(D,{})]})};export{Z as default};
