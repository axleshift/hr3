import{r as c,j as s}from"./index-CCQjMedi.js";import{a as u,e as h}from"./api-DtbWpsV7.js";import{C,a as g}from"./CRow-DNMWGK06.js";import{C as x,a as f}from"./CCardBody-CfIUcbl0.js";import{C as j}from"./CCardHeader-DSNy9un6.js";import{a as y,C as b}from"./CForm-KFIMHm5K.js";import{C as l}from"./CFormInput-BrW2xO6p.js";import"./CFormControlWrapper-WmVgiADm.js";const D=()=>{const[e,p]=c.useState({cpassword:"",npassword:"",cnpassword:""}),[r,m]=c.useState({}),[o,t]=c.useState({visible:!1,type:"",message:""}),d=n=>{p({...e,[n.target.name]:n.target.value})},w=async n=>{n.preventDefault();const a={};if(e.cpassword.trim()||(a.cpassword="Current Password is Required"),e.npassword.trim()||(a.npassword="New Password is Required"),e.cnpassword.trim()?e.npassword!==e.cnpassword&&(a.cnpassword="New Password and Confirm New Password do not match"):a.cnpassword="Confirm New Password is Required",Object.keys(a).length>0){m(a);return}try{const i=await h.post("/changepassword",{...e,userId:user.id});i.data.status==="success"?(t({visible:!0,type:"success",message:"Password changed successfully."}),setTimeout(()=>{logout()},2e3)):t({visible:!0,type:"danger",message:i.data.message||"An error occurred while processing your request. Please try again later."})}catch{t({visible:!0,type:"danger",message:"An error occurred while processing your request. Please try again later."})}};return s.jsx(C,{children:s.jsx(g,{children:s.jsxs(x,{className:"mb-2",children:[s.jsx(j,{className:"center-left",children:s.jsx("strong",{children:"Change Password"})}),s.jsxs(f,{children:[o.visible&&s.jsx(y,{color:o.type,onClose:()=>t({...o,visible:!1}),dismissible:!0,children:o.message}),s.jsxs(b,{onSubmit:w,children:[s.jsx(l,{type:"password",name:"cpassword",placeholder:"Enter Current Password",onChange:d,className:"mb-4"}),r.cpassword&&s.jsx("span",{className:"text-danger",children:r.cpassword}),s.jsx(l,{type:"password",name:"npassword",placeholder:"Enter New Password",onChange:d,className:"mb-4"}),r.npassword&&s.jsx("span",{className:"text-danger",children:r.npassword}),s.jsx(l,{type:"password",name:"cnpassword",placeholder:"Confirm New Password",onChange:d,className:"mb-4"}),r.cnpassword&&s.jsx("span",{className:"text-danger",children:r.cnpassword}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(u,{type:"submit",color:"primary",children:"Submit"})})]})]})]})})})};export{D as default};
