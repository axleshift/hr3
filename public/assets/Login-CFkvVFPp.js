import{u as j,j as e,r as i,g as N,C as S,L as w,a as I,b as L}from"./index-BAyO2E5M.js";import{C as g,F as m,f as _,a as k,b as E}from"./Compliance-CmyZk0Sd.js";import{C as p,a as u}from"./CRow-jB5mWDoF.js";import{C as F,a as P}from"./CCardBody-DE_qiR2I.js";import{C as R}from"./CForm-CL3T_XM6.js";import{C as T}from"./CAlert-Dwouhtdc.js";import{C as x}from"./CInputGroup-Dq7iEPPL.js";import{C as h}from"./CInputGroupText-Cxlec9us.js";import{C as f}from"./CFormInput-B4GftH-Q.js";import"./CFormControlWrapper-CVzywb50.js";const A=()=>{const r=j();return e.jsx(g,{fluid:!0,children:e.jsx("footer",{className:"p-2 p-md- ",children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top",children:[e.jsx("p",{children:"Â© 2025 Axleshift HR 3. All Rights Reserved"}),e.jsxs("ul",{className:"list-unstyled d-flex",children:[e.jsx("li",{className:"ms-3",children:e.jsx("span",{className:"link-body-emphasis",onClick:()=>r("/privacy-policy"),children:"Privacy Policy"})}),e.jsx("li",{className:"ms-3",children:e.jsx("span",{className:"link-body-emphasis",onClick:()=>r("/Services"),children:"Terms of Service"})})]})]})})})},K=()=>{const[r,y]=i.useState(""),[o,C]=i.useState(""),[n,l]=i.useState(!1),[t,c]=i.useState({visible:!1,type:"",message:""}),d=N(),v=j(),b=async a=>{a.preventDefault(),l(!0);try{const s=await I.post("/api/auth/login",{username:r,password:o});d({type:"SET_USER",payload:s.data.user}),d({type:"SET_SESSION_ID",payload:s.data.session_id}),L.set("dcims",s.data.session_id,{expires:30}),sessionStorage.setItem("session_id",s.data.session_id),sessionStorage.setItem("role",s.data.user.role),sessionStorage.setItem("user_id",s.data.user.id),sessionStorage.setItem("name",s.data.user.name),v("/dashboard")}catch{c({visible:!0,type:"danger",message:"Login failed. Please check your credentials."})}finally{l(!1)}};return i.useEffect(()=>{if(t.visible){const a=setTimeout(()=>c({...t,visible:!1}),3e3);return()=>clearTimeout(a)}},[t]),e.jsxs("div",{className:"bg-light min-vh-100 d-flex flex-column",children:[e.jsx(g,{className:"flex-grow-1 d-flex flex-column justify-content-center",children:e.jsx(p,{className:"justify-content-center",children:e.jsx(u,{xs:12,sm:10,md:8,lg:5,children:e.jsx(F,{className:"shadow-sm p-4 border-0 rounded",children:e.jsx(P,{children:e.jsxs(R,{onSubmit:b,children:[e.jsx("h2",{className:"text-left fw-bold",children:"Login"}),e.jsx("p",{className:"text-left text-muted",children:"Sign in to your account"}),t.visible&&e.jsx(T,{color:t.type,className:"mb-3",children:t.message}),e.jsxs(x,{className:"mb-3",children:[e.jsx(h,{children:e.jsx(m,{icon:_})}),e.jsx(f,{type:"text",placeholder:"Username",value:r,onChange:a=>y(a.target.value),required:!0})]}),e.jsxs(x,{className:"mb-3",children:[e.jsx(h,{children:e.jsx(m,{icon:k})}),e.jsx(f,{type:"password",placeholder:"Password",value:o,onChange:a=>C(a.target.value),required:!0})]}),e.jsx(p,{children:e.jsx(u,{children:e.jsx(E,{type:"submit",color:"primary",className:"w-100",disabled:n,children:n?e.jsx(S,{component:"span",size:"sm","aria-hidden":"true"}):"Login"})})}),e.jsx("div",{className:"text-center mt-3",children:e.jsx(w,{to:"/ForgotPassword",className:"text-decoration-none",children:"Forgot password?"})})]})})})})})}),e.jsx(A,{})]})};export{K as default};
