import{r as t,m as b,j as e,C as w}from"./index-B_iLjB0e.js";import{a as T,F as N,L as R}from"./index-Co_23KSm.js";import{C as D,a as E}from"./CCardBody-2AJILW45.js";import{C as F}from"./CCardHeader-DLU2HqC-.js";import{C as _}from"./CInputGroup-CP7Xvey4.js";import{C as q}from"./CFormInput-DsFNTbKA.js";import{C as A,a as B,b as g,c as n,d as I,e as i}from"./CTable-kPdPp4U9.js";import{C as k}from"./DefaultLayout-C515Atjv.js";import{C as H,a as h}from"./CPaginationItem-B7yX9PkG.js";import"./CFormControlWrapper-BZGs_UKG.js";const X=()=>{const[x,c]=t.useState([]),[m,l]=t.useState([]),[f,j]=t.useState(!0),[v,y]=t.useState(""),[r,d]=t.useState(1),[p,C]=t.useState(1),u=10;t.useEffect(()=>{L()},[r]);const L=async()=>{try{j(!0);const a=(await b.get("/api/leave-requests",{params:{page:r,limit:u}})).data||{};if(Array.isArray(a.leaveRequests)){const o=a.leaveRequests.filter(S=>S.status.toLowerCase()==="pending");c(o),l(o)}else c([]),l([]);C(a.totalPages||1)}catch(s){console.error("Error fetching leave list:",s),c([]),l([]),C(1)}finally{j(!1)}},P=s=>{if(y(s),s.trim()==="")l(x);else{const a=x.filter(o=>o.name.toLowerCase().includes(s.trim().toLowerCase()));l(a)}};return e.jsxs(D,{children:[e.jsxs(F,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Pending Leave Requests"}),e.jsx("div",{className:"d-flex gap-2",children:e.jsxs(_,{children:[e.jsx(q,{type:"text",placeholder:"Search...",value:v,onChange:s=>P(s.target.value)}),e.jsx(T,{color:"primary",children:e.jsx(N,{icon:R})})]})})]}),e.jsx(E,{children:f?e.jsxs("div",{className:"text-center",children:[e.jsx(w,{color:"primary"}),e.jsx("p",{children:"Loading..."})]}):m.length===0?e.jsx("div",{className:"text-center",children:e.jsx("p",{children:"No approved leave request found."})}):e.jsxs(e.Fragment,{children:[e.jsxs(A,{hover:!0,responsive:!0,children:[e.jsx(B,{children:e.jsxs(g,{children:[e.jsx(n,{children:"#"}),e.jsx(n,{children:"Employee"}),e.jsx(n,{children:"Date Requested"}),e.jsx(n,{children:"Leave Type"}),e.jsx(n,{children:"Days"}),e.jsx(n,{children:"Paid"}),e.jsx(n,{children:"Status"})]})}),e.jsx(I,{children:m.map((s,a)=>e.jsxs(g,{children:[e.jsx(i,{children:(r-1)*u+a+1}),e.jsx(i,{children:s.name}),e.jsx(i,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(i,{children:s.leave_type}),e.jsx(i,{children:s.total_days}),e.jsx(i,{children:s.is_paid?"Paid":"Unpaid"}),e.jsx(i,{children:e.jsx(k,{color:"warning",children:s.status})})]},s.id))})]}),e.jsxs(H,{align:"center",className:"mt-3",children:[e.jsx(h,{disabled:r===1,onClick:()=>d(r-1),children:"«"}),Array.from({length:p},(s,a)=>e.jsx(h,{active:a+1===r,onClick:()=>d(a+1),children:a+1},a+1)),e.jsx(h,{disabled:r===p,onClick:()=>d(r+1),children:"»"})]})]})})]})};export{X as default};
