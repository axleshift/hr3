import{r as t,k as S,i as f,j as e}from"./index-CCQjMedi.js";import{b as w,F as l,v,c as N,a as I,e as b,g as L}from"./api-DtbWpsV7.js";import{C as _,a as E}from"./CRow-DNMWGK06.js";import{C as P,a as F}from"./CCardBody-CfIUcbl0.js";import{C as R,a as U}from"./CForm-KFIMHm5K.js";import{C as m,a as p}from"./CInputGroupText-EGGT-giD.js";import{C as u}from"./CFormInput-BrW2xO6p.js";import"./CFormControlWrapper-WmVgiADm.js";const z=()=>{const[r,x]=t.useState(""),[o,h]=t.useState(""),[n,g]=t.useState(""),[i,k]=t.useState(!1),c=S(),j=f(),C=async a=>{a.preventDefault();try{let d=new URLSearchParams(window.location.search).get("r");const s=await b.post("/auth/login",{username:r,password:o});c({type:"SET_USER",payload:s.data.user}),c({type:"SET_SESSION_ID",payload:s.data.session_id}),L.set("dcims",s.data.session_id,{expires:30}),sessionStorage.setItem("session_id",s.data.session_id),sessionStorage.setItem("role",s.data.user.role),sessionStorage.setItem("employee_id",s.data.user.employee_id),sessionStorage.setItem("name",s.data.user.name),j(d||"/dashboard")}catch{g("Login failed. Please check your credentials.")}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(w,{children:e.jsx(_,{className:"justify-content-center",children:e.jsx(E,{md:5,lg:4,xl:5,children:e.jsx(P,{className:"mx-4",children:e.jsx(F,{className:"p-4",children:e.jsxs(R,{onSubmit:C,children:[e.jsx("h1",{className:"text-center",children:"Login"}),e.jsx("p",{className:"text-secondary text-center",children:"Sign in to your account"}),n&&e.jsx(U,{color:"danger",children:n}),e.jsxs(m,{className:"mb-3",children:[e.jsx(p,{children:e.jsx(l,{icon:v})}),e.jsx(u,{type:"text",id:"username",value:r,onChange:a=>x(a.target.value),placeholder:"Username",required:!0})]}),e.jsxs(m,{className:"mb-3",children:[e.jsx(p,{children:e.jsx(l,{icon:N})}),e.jsx(u,{type:"password",id:"password",value:o,onChange:a=>h(a.target.value),placeholder:"Password",required:!0})]}),e.jsx(I,{type:"submit",color:"primary",className:"w-100",disabled:i,children:i?"Logging in...":"Login"})]})})})})})})})};export{z as default};
